{% apply spaceless %}
<figure
    {%- if figureNode.width is not empty %} width="{{ figureNode.width }}"{% endif -%}
    {%- if figureNode.classes is not empty %} class="{{ figureNode.classesString }}"{% endif -%}
>
    {{ figureNode.image.render()|raw }}

    {% if figureNode.document %}
        {% set caption = figureNode.document.render()|trim %}

        {% if caption %}
            <figcaption>{{ caption|raw }}</figcaption>
        {% endif %}
    {% endif %}
</figure>
{% endapply %}
